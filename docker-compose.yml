version: "3.9"

services:
  zooweeper-0:
    build:
      context: ./server
      dockerfile: Dockerfile
    image: zooweeper_server:latest
    environment:
      - PORT=8080
      - BASE_URL=http://host.docker.internal
    ports:
      - "8080:8080"

  zooweeper-1:
    image: zooweeper_server:latest
    environment:
      - PORT=8081
      - BASE_URL=http://host.docker.internal
    ports:
      - "8081:8081"

  zooweeper-2:
    image: zooweeper_server:latest
    environment:
      - PORT=8082
      - BASE_URL=http://host.docker.internal
    ports:
      - "8082:8082"

  # kafka servers
  kafka-server-0:
    build:
      context: ./kafka-server
      dockerfile: Dockerfile
    image: kafka_server:latest
    environment:
      - PORT=9090
      - BASE_URL=http://host.docker.internal
    ports:
      - "9090:9090"

  kafka-server-1:
    image: kafka_server:latest
    environment:
      - PORT=9091
      - BASE_URL=http://host.docker.internal
    ports:
      - "9091:9091"

  kafka-server-2:
    image: kafka_server:latest
    environment:
      - PORT=9092
      - BASE_URL=http://host.docker.internal
    ports:
      - "9092:9092"

  kafka-react-app-0:
    build:
      context: ./kafka-react-app
      dockerfile: Dockerfile
    image: kafka_react_app:latest
    environment:
      - PORT=3000
      - BASE_URL=http://host.docker.internal
    ports:
      - "3000:3000"

  kafka-react-app-1:
    image: kafka_react_app:latest
    environment:
      - PORT=3001
      - BASE_URL=http://host.docker.internal
    ports:
      - "3001:3001"
